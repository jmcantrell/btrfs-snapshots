#!/usr/bin/env bash

# Show that actions are the first choice for completion if an option has not
# been requested.

set -eu

. "$LIB_DIR"/init.sh
. "$TESTS_LIB_DIR"/init.sh

_init_completion() {
    # shellcheck disable=SC2034
    cur=""
    # shellcheck disable=SC2034
    prev="btrfs-snapshots"
    # shellcheck disable=SC2034
    words=("btrfs-snapshots" "")
}

export -f _init_completion

. "$PWD/completion/btrfs-snapshots.bash"

_btrfs_snapshots

# shellcheck disable=SC2034
actions=(create list prune)

assert_arrays_equal COMPREPLY actions
